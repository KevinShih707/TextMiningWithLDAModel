{% extends "basic.html" %}

{% block head_script %}
    {% load static %}
    <script type="text/javascript" src="{% static 'js/d3.v3.js' %}"></script><!-- D3一定要先載入 NVD3一定要後載 -->
{% endblock %}

{% block stylesheet %}
    <link type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/nvd3/1.8.6/nv.d3.min.css" rel="stylesheet" />
    <style type="text/css">
        /* 圖表文字 字體 */
        .nvd3 text {
            font: normal 12px "Noto Sans TC", sans-serif;
        }
        /* X軸字體顏色大小 */
        .nv-x text{
          font-size: 20px;
          fill: #bdbdae;
        }
        /* Y軸字體顏色大小 */
        .nv-y text{
          font-size: 16px;
          fill: #bdbdae;
        }
        /* 指標移到上面顯示的字體 */
        .nvtooltip {
            font-family: "Noto Sans TC", sans-serif;
            font-size: 17px;
        }
        /* 以下2個為圖表格線 */
        /* 背景網格 */
        .nvd3 .nv-axis line {
            stroke: #fff;
            stroke-opacity: .3;
        }
        /* X軸那條垂直線 */
        .nvd3 .nv-axis path {
            stroke: #fff;
            stroke-opacity: .75;
        }
        .top-button {
            position: fixed;
            left: 95%;
            top: 95%;
            transform: translate(-50%, -50%);
            width: auto;
            height: auto;
        }
        #rect_bubble:hover {
            filter: url(#white-glow);
            opacity: 0.3;
        }
    </style>
{% endblock %}

{% block mainbody %}
{% load static %}
<div id="page-content" class="uk-section uk-padding uk-preserve-color" uk-height-viewport="offset-top: true" style="background: #404040;">
    <div class="uk-grid-small uk-padding uk-text-center uk-margin" uk-grid>

        {# 長條圖 #}
        <div class="uk-width-1-1">
            <div class="uk-tile uk-padding-remove">
                <div id="discreteBarChart">
                    <svg class="d3-RWD" style="height:400px; width: 100%;"></svg>
                </div>
            </div>
        </div>


        {% for topic in topics %}
        <div class="uk-grid-small uk-grid-match uk-margin" uk-grid>
            <div id="topic-{{ forloop.counter0 }}" class="uk-hidden">
                {# 這裡放WC #}
                <div class="uk-width-expand uk-grid-item-match">
                    <div class="uk-tile uk-background-secondary uk-padding-remove">
                        <img data-src="{{ topic.wc_url }}" class="uk-animation-fade uk-position-center" uk-img>
                    </div>
                </div>

                {# 放代表性文章 #}
                <div class="uk-width-1-3 uk-grid-item-match noto-light">
                    <div class="uk-tile uk-text-left uk-padding" style="background: #d9d9d9;">
                        <legend class="uk-legend">
                            Lorem ipsum dolor sit amet
                        </legend>

                        <p style="line-height: 32px; font-size: 18px;" class="noto-light">
                            <!--Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.-->
                            <!--Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.-->
                            <!--Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.-->
                            {{ topic.authentic_article }}
                        </p>
                    </div>
                </div>

                <div class="uk-width-1-1 uk-grid-item-match noto uk-light">
                    <div class="uk-tile uk-background-secondary uk-text-left uk-padding-remove-bottom">
                        <legend class="uk-legend uk-heading-bullet uk-margin-left">
                            屬於此主題之文章
                        </legend>
                    </div>
                </div>
                {# 這裡放主題內文章列表 #}
                {% for article in topic.articles %}
                <div class="uk-width-1-1  uk-light">
                    <div class="uk-tile uk-background-secondary uk-padding-remove-vertical">
                        <div class="uk-margin-left uk-margin-right uk-text-left uk-padding">
                        <legend class="uk-legend noto">
                            Lorem ipsum dolor sit amet
                        </legend>
                        <p style="line-height: 32px; font-size: 18px;" class="noto-light">
                            {{ article }}
                        </p>
                        </div>
                    </div>
                </div>
                {% endfor %}

            </div>
        </div>
        {% endfor %}

    </div>
</div>

<a href="{% url 'bubble' office classification%}">
    <svg id="rect_bubble" style="opacity:.25; position:absolute; top:90%; left:55%; z-index: 11;" width="100" height="100">
        <rect rx="20" ry="20" style="fill:#f0f0f0;" x="0" y="0" width="100" height="100"></rect>
    </svg>
    <svg style="position:absolute; top:90%; left:55%; z-index: 10;" width="100" height="100">
        <rect rx="20" ry="20" style="fill:#f0f0f0;opacity:0.8;" x="0" y="0" width="100" height="100"></rect>
        <svg fill="#999999" class="uk-position-center" height="100" width="100" style="transform: scale(5.0) translate(2px,2px);">
            <path xmlns="http://www.w3.org/2000/svg" d="M15.989 8.011a.84.84 0 0 1-.856.856c-.485 0-.856-.371-.856-.856s.371-.856.856-.856a.84.84 0 0 1 .856.856zm-2.282 2.853c-1.113 0-1.997.885-1.997 1.997s.885 1.997 1.997 1.997 1.997-.885 1.997-1.997-.885-1.997-1.997-1.997zm-5.736 1.598A3.986 3.986 0 0 1 4.005 16 4.007 4.007 0 0 1 .01 12.005c0-1.141.485-2.168 1.227-2.882C.838 8.268.581 7.297.581 6.299.581 2.847 3.406.022 6.858.022s6.277 2.825 6.277 6.277a6.254 6.254 0 0 1-5.164 6.163zm4.309-6.163c0-2.996-2.425-5.421-5.421-5.421S1.437 3.303 1.437 6.299c0 .827.2 1.598.514 2.283a3.904 3.904 0 0 1 2.054-.571 3.972 3.972 0 0 1 3.966 3.595c2.454-.514 4.309-2.711 4.309-5.307z"></path>
        </svg>
    </svg>
</a>

<a href="#navbar" class="top-button uk-button-small uk-button-primary uk-light" uk-scroll>
    TOP
</a>

<!-- 把 script 載入標籤盡量放在body尾端 速度考量 -->
<script>
var data_discreteBarChart = {{ data|safe }};
document.getElementById("topic-0").classList.remove("uk-hidden");

$(function($) {
    $("#page-content").Lazy();
});
</script>
<script type="text/javascript" src="{% static 'js/nv.d3.js' %}"></script>
<script type="text/javascript" src="{% static 'js/barchart.js' %}"></script>
<script src="{% static 'js/navbar.bg.js' %}"></script>
{% endblock %}